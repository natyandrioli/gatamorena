$(function(){RecommendStore=function(){function d(){$(".recommend-store-loading").toggle("fast")}function e(){d();var a=function(a){({success:function(){f();$.message.show("success",{vars:{title:"Loja indicada com sucesso"}})},error:function(){$.message.show("error",{vars:{title:"Houve um erro ao indicar a loja, tente novamente"}})}})[a.Status.type].call(this)};$.post(base_url+"clientes/recommendStore",{data:JSON.stringify({RecommendStore:{nome_cliente:$("#RecommendStoreForm #RecommendStoreNomeCliente").val(),
email_cliente:$("#RecommendStoreForm #RecommendStoreEmailCliente").val(),nome_indicado:$("#RecommendStoreForm #RecommendStoreNomeIndicado").val(),email_indicado:$("#RecommendStoreForm #RecommendStoreEmailIndicado").val(),comentario:$("#RecommendStoreForm #RecommendStoreComentario").val(),version:$("#RecommendStoreVersion").val(),recaptcha_response:$("#g-recaptcha-response").val()}})}).done(function(b){a(b)}).fail(function(){a(JSON.stringify({Status:{type:"error"}}))}).always(function(){d()})}function f(){$("body").hasClass("layout-mobile")?
($("body").css("overflow-y","auto"),$(".wrapper").removeAttr("style"),$("body").scrollTop(position),$(".modal-x.open").removeClass("open")):$.modal.hide("fadeOutUp","modal-recommend-store")}function h(){if($("body").hasClass("layout-mobile")){position=$("body").scrollTop();var a=$(window).height();$("body").css("overflow-y","hidden");setTimeout(function(){$(".wrapper").css({"overflow-y":"hidden",height:a})},300);var b='<button class="btn btn-submit btn-block" type="submit"><span class="btn-text">Enviar</span></button>';
$(".modal-header-title").html('Recomende essa Loja <a href="javascript:;" class="modal-close">\u00d7</a>');$(".modal-footer").html("");$(".modal-footer").html(b);$("#modal-recommend-store").addClass("open");g()}else b='<button class="btn" type="submit"><span class="btn-text">Enviar</span></button>',$(".modal-header-title").html('Recomende essa Loja <a href="javascript:;" class="modal-close">\u00d7</a>'),$(".modal-footer").html(""),$(".modal-footer").html(b),g(),$.modal.show("fadeInDown","modal-recommend-store")}
function g(){$("#g-recaptcha-response-error").remove();0<$("#g-recaptcha-response").val().length&&grecaptcha.reset()}var c=$("#RecommendStoreForm");return{listen:function(){if($("body").hasClass("layout-mobile"))$(document).on("click",".btn-submit",function(){c.submit()});c.submit(function(a){a.preventDefault();c.valid()&&($("body").hasClass("pagina-produto")?grecaptcha.execute().then(function(a){progress=setInterval(function(){0<$("#g-recaptcha-response").val().length&&($("#RecommendStoreVersion").val("3"),
clearInterval(progress),e())},1E3)}):0<$("#g-recaptcha-response").val().length?e():($("#g-recaptcha-response-error").remove(),$("#div-captcha-recommend-store").append('<label id="g-recaptcha-response-error" class="error" for="g-recaptcha-response">Voc\u00ea precisa completar o Captcha de seguran\u00e7a.</label>')))});$(".recommend-store-btn").on("click",function(a){a.preventDefault();h.call(this)});$("#modal-recommend-store .btn-cancelar").on("click",function(){f()})}}}();RecommendStore.listen()});